# Telegram Bot –¥–ª—è –ê–≤—Ç–æ—Å–µ—Ä–≤—ñ—Å—É

–¶–µ Telegram-–±–æ—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω–æ–≥–æ –∑–∞–ø–∏—Å—É –Ω–∞ –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è –∞–≤—Ç–æ–º–æ–±—ñ–ª—ñ–≤ –≤ –∞–≤—Ç–æ—Å–µ—Ä–≤—ñ—Å.

## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
```bash
npm install
```

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

1. –°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤—ñ `.env.example`:
```bash
cp .env.example .env
```

2. –û—Ç—Ä–∏–º–∞–π—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ —É [@BotFather](https://t.me/BotFather)

3. –ó–∞–ø–æ–≤–Ω—ñ—Ç—å –∑–º—ñ–Ω–Ω—ñ –≤ `.env`:
- `TELEGRAM_BOT_TOKEN` - —Ç–æ–∫–µ–Ω –≤–∞—à–æ–≥–æ –±–æ—Ç–∞
- `SERVER_API_URL` - URL –≤–∞—à–æ–≥–æ API —Å–µ—Ä–≤–µ—Ä–∞
- `SERVER_API_KEY` - –∫–ª—é—á –¥–æ—Å—Ç—É–ø—É –¥–æ API (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–µ–Ω)

### –ó–∞–ø—É—Å–∫

#### –î–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏:
```bash
npm run dev
```

#### –î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω:
```bash
npm start
```

## üìã –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å

### –û—Å–Ω–æ–≤–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó:
- üìã –ü–µ—Ä–µ–≥–ª—è–¥ –∞–∫—Ç–∏–≤–Ω–∏—Ö –∑–∞–ø–∏—Å—ñ–≤
- üöó –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∞–≤—Ç–æ–º–æ–±—ñ–ª—è–º–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- ‚ûï –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–∏—Ö –∑–∞–ø–∏—Å—ñ–≤ –Ω–∞ –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è
- üîß –ü–µ—Ä–µ–≥–ª—è–¥ –¥–æ—Å—Ç—É–ø–Ω–∏—Ö –ø–æ—Å–ª—É–≥
- üìû –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è
- ‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é

### –ö–æ–º–∞–Ω–¥–∏ –±–æ—Ç–∞:
- `/start` - –ü–æ—á–∞—Ç–∏ —Ä–æ–±–æ—Ç—É –∑ –±–æ—Ç–æ–º
- `/help` - –ü–æ–∫–∞–∑–∞—Ç–∏ –¥–æ–ø–æ–º–æ–≥—É

## üèóÔ∏è –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É:
```
telegram-bot/
‚îú‚îÄ‚îÄ bot.js                 # –ì–æ–ª–æ–≤–Ω–∏–π —Ñ–∞–π–ª –±–æ—Ç–∞
‚îú‚îÄ‚îÄ package.json          # –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
‚îú‚îÄ‚îÄ .env.example         # –ü—Ä–∏–∫–ª–∞–¥ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
‚îú‚îÄ‚îÄ README.md           # –¶–µ–π —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ logs/               # –õ–æ–≥–∏
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ userManager.js  # –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ validator.js    # –í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö
‚îÇ   ‚îî‚îÄ‚îÄ appointmentFlow.js # –ü–æ—Ç—ñ–∫ –∑–∞–ø–∏—Å—É
‚îî‚îÄ‚îÄ tests/              # –¢–µ—Å—Ç–∏
```

### –û—Å–Ω–æ–≤–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:

1. **BotCommands** - –∫–ª–∞—Å –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –∫–æ–º–∞–Ω–¥ –±–æ—Ç–∞
2. **AutoServiceAPI** - —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤–∑–∞—î–º–æ–¥—ñ—ó –∑ —Å–µ—Ä–≤–µ—Ä–æ–º
3. **AppointmentFlow** - —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø–æ—Ç–æ–∫–æ–º —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–ø–∏—Å—É
4. **UserManager** - —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –¥–∞–Ω–∏–º–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
5. **Validator** - –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –≤–≤–µ–¥–µ–Ω–∏—Ö –¥–∞–Ω–∏—Ö

## üîß –†–æ–∑—Ä–æ–±–∫–∞

### –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö –∫–æ–º–∞–Ω–¥:
1. –î–æ–¥–∞–π—Ç–µ –º–µ—Ç–æ–¥ –≤ –∫–ª–∞—Å `BotCommands`
2. –î–æ–¥–∞–π—Ç–µ –æ–±—Ä–æ–±–Ω–∏–∫ –≤ `bot.onText()` –∞–±–æ `bot.on('message')`
3. –î–æ–¥–∞–π—Ç–µ –∫–Ω–æ–ø–∫—É –≤ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—É –∫–ª–∞–≤—ñ–∞—Ç—É—Ä—É

### –ü—Ä–∏–∫–ª–∞–¥ –Ω–æ–≤–æ—ó –∫–æ–º–∞–Ω–¥–∏:
```javascript
// –í BotCommands
static async handleNewCommand(msg) {
  const chatId = msg.chat.id;
  await bot.sendMessage(chatId, '–í—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞ –∫–æ–º–∞–Ω–¥—É');
}

// –í –æ–±—Ä–æ–±–Ω–∏–∫—É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
case '–ù–æ–≤–∞ –∫–æ–º–∞–Ω–¥–∞':
  await BotCommands.handleNewCommand(msg);
  break;
```

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç—ñ–≤:
```bash
npm test
```

### –†—É—á–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è:
1. –ó–∞–ø—É—Å—Ç—ñ—Ç—å –±–æ—Ç–∞: `npm run dev`
2. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –≤–∞—à –±–æ—Ç–∞ –≤ Telegram
3. –ù–∞–¥—ñ—à–ª—ñ—Ç—å `/start`
4. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤—Å—ñ —Ñ—É–Ω–∫—Ü—ñ—ó

## üìä –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏:
- `logs/error.log` - –ø–æ–º–∏–ª–∫–∏
- `logs/combined.log` - –≤—Å—ñ –ø–æ–¥—ñ—ó

### –ú–µ—Ç—Ä–∏–∫–∏:
- –ö—ñ–ª—å–∫—ñ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- –ö—ñ–ª—å–∫—ñ—Å—Ç—å —Å—Ç–≤–æ—Ä–µ–Ω–∏—Ö –∑–∞–ø–∏—Å—ñ–≤
- –ß–∞—Å –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ API

## üöÄ –î–µ–ø–ª–æ–π–º–µ–Ω—Ç

### –ù–∞ VPS:
1. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å Node.js
2. –ö–ª–æ–Ω—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π
3. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ: `npm install`
4. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ `.env`
5. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ PM2 –¥–ª—è –∑–∞–ø—É—Å–∫—É: `pm2 start bot.js`

### –ù–∞ Heroku:
1. –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π –¥–æ–¥–∞—Ç–æ–∫
2. –î–æ–¥–∞–π—Ç–µ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
3. –î–µ–ø–ª–æ–π—Ç–µ –∫–æ–¥

### Docker:
```bash
docker build -t telegram-bot .
docker run -d --env-file .env telegram-bot
```

## üîí –ë–µ–∑–ø–µ–∫–∞

- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ HTTPS –¥–ª—è webhook
- –ó–±–µ—Ä—ñ–≥–∞–π—Ç–µ —Ç–æ–∫–µ–Ω–∏ –≤ .env —Ñ–∞–π–ª—ñ
- –í–∞–ª—ñ–¥—É–π—Ç–µ –≤—Å—ñ –≤—Ö—ñ–¥–Ω—ñ –¥–∞–Ω—ñ
- –û–±–º–µ–∂—Ç–µ –¥–æ—Å—Ç—É–ø –¥–æ API

## ü§ù –í–Ω–µ—Å–æ–∫ –≤ –ø—Ä–æ–µ–∫—Ç

1. –§–æ—Ä–∫–Ω—ñ—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π
2. –°—Ç–≤–æ—Ä—ñ—Ç—å –≥—ñ–ª–∫—É –¥–ª—è –Ω–æ–≤–æ—ó —Ñ—É–Ω–∫—Ü—ñ—ó
3. –ó—Ä–æ–±—ñ—Ç—å pull request
4. –î–æ–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–∏ –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É

## üìû –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–Ø–∫—â–æ –≤–∏–Ω–∏–∫–ª–∏ –ø–∏—Ç–∞–Ω–Ω—è:
- Email: support@avtoservis.ua
- Telegram: @support_bot
- –¢–µ–ª–µ—Ñ–æ–Ω: +380 (99) 123-45-67

## üìÑ –õ—ñ—Ü–µ–Ω–∑—ñ—è

MIT License - –¥–∏–≤—ñ—Ç—å—Å—è —Ñ–∞–π–ª LICENSE

## üîÑ –û–Ω–æ–≤–ª–µ–Ω–Ω—è

–î–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –±–æ—Ç–∞:
1. –ó—É–ø–∏–Ω—ñ—Ç—å –ø–æ—Ç–æ—á–Ω–∏–π –ø—Ä–æ—Ü–µ—Å
2. –û–Ω–æ–≤—ñ—Ç—å –∫–æ–¥: `git pull`
3. –û–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ: `npm update`
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å: `npm start`