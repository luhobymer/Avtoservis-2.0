-- Скрипт для заповнення БД тестовими даними
-- Створено для тестування додатку
-- НЕ ЧІПАЄ таблицю users - використовує існуючих користувачів

-- ========================================
-- ФІКТИВНІ UUID КОРИСТУВАЧІВ (замініть на реальні з вашої БД)
-- ========================================
-- Використовуйте ці UUID або замініть їх на реальні ID користувачів з вашої БД
-- Приклад запиту для отримання реальних ID: SELECT id FROM users LIMIT 4;

-- ========================================
-- 1. СЕРВІСНІ СТАНЦІЇ
-- ========================================
INSERT INTO service_stations (id, name, address, phone, email, working_hours, description) VALUES
('11111111-1111-1111-1111-111111111111', 'АвтоСервіс Центр', 'вул. Шевченка, 15, Київ', '+380441234567', 'info@autoservice.ua', '{"monday": "08:00-18:00", "tuesday": "08:00-18:00", "wednesday": "08:00-18:00", "thursday": "08:00-18:00", "friday": "08:00-18:00", "saturday": "09:00-15:00", "sunday": "closed"}', 'Повний спектр автосервісних послуг'),
('22222222-2222-2222-2222-222222222222', 'Майстерня Експрес', 'пр. Перемоги, 45, Київ', '+380442345678', 'express@repair.ua', '{"monday": "09:00-19:00", "tuesday": "09:00-19:00", "wednesday": "09:00-19:00", "thursday": "09:00-19:00", "friday": "09:00-19:00", "saturday": "10:00-16:00", "sunday": "closed"}', 'Швидкий ремонт та діагностика'),
('33333333-3333-3333-3333-333333333333', 'ПрофіАвто', 'вул. Хрещатик, 22, Київ', '+380443456789', 'profi@auto.ua', '{"monday": "07:00-20:00", "tuesday": "07:00-20:00", "wednesday": "07:00-20:00", "thursday": "07:00-20:00", "friday": "07:00-20:00", "saturday": "08:00-18:00", "sunday": "10:00-16:00"}', 'Професійний ремонт преміум автомобілів'),
('44444444-4444-4444-4444-444444444444', 'Автодоктор', 'вул. Саксаганського, 78, Київ', '+380444567890', 'doctor@auto.ua', '{"monday": "08:30-17:30", "tuesday": "08:30-17:30", "wednesday": "08:30-17:30", "thursday": "08:30-17:30", "friday": "08:30-17:30", "saturday": "09:00-14:00", "sunday": "closed"}', 'Діагностика та ремонт всіх марок авто');

-- ========================================
-- 2. МЕХАНІКИ
-- ========================================
INSERT INTO mechanics (id, first_name, last_name, phone, email, specialization, station_id) VALUES
('aaaa1111-1111-1111-1111-111111111111', 'Олександр', 'Петренко', '+380501234567', 'petenko@autoservice.ua', 'Двигуни та трансмісія', '11111111-1111-1111-1111-111111111111'),
('bbbb2222-2222-2222-2222-222222222222', 'Михайло', 'Іваненко', '+380502345678', 'ivanenko@repair.ua', 'Електрика та електроніка', '22222222-2222-2222-2222-222222222222'),
('cccc3333-3333-3333-3333-333333333333', 'Андрій', 'Коваленко', '+380503456789', 'kovalenko@profi.ua', 'Підвіска та гальма', '33333333-3333-3333-3333-333333333333'),
('dddd4444-4444-4444-4444-444444444444', 'Сергій', 'Мельник', '+380504567890', 'melnik@doctor.ua', 'Кузовний ремонт', '44444444-4444-4444-4444-444444444444');

-- ========================================
-- 3. ПОСЛУГИ
-- ========================================
INSERT INTO services (id, name, description, base_price, duration_minutes, category) VALUES
('eeee1111-1111-1111-1111-111111111111', 'Заміна масла', 'Заміна моторного масла та масляного фільтра', 800.00, 30, 'Технічне обслуговування'),
('ffff2222-2222-2222-2222-222222222222', 'Діагностика двигуна', 'Комп\'ютерна діагностика роботи двигуна', 500.00, 60, 'Діагностика'),
('gggg3333-3333-3333-3333-333333333333', 'Заміна гальмівних колодок', 'Заміна передніх або задніх гальмівних колодок', 1200.00, 90, 'Гальмівна система'),
('hhhh4444-4444-4444-4444-444444444444', 'Розвал-схождення', 'Регулювання кутів установки коліс', 600.00, 45, 'Підвіска');

-- ========================================
-- 4. ЗАПЧАСТИНИ
-- ========================================
INSERT INTO parts (name, article, manufacturer, price, warranty_period, description, part_number) VALUES
('Моторне масло 5W-30', 'OIL5W30-5L', 'Castrol', 450.00, 12, 'Синтетичне моторне масло 5 літрів', 'GTX-5W30-5L'),
('Масляний фільтр', 'OF-001', 'Mann Filter', 180.00, 6, 'Оригінальний масляний фільтр', 'W712/75'),
('Гальмівні колодки передні', 'BP-F001', 'Brembo', 850.00, 24, 'Керамічні гальмівні колодки', 'P85020'),
('Повітряний фільтр', 'AF-002', 'Bosch', 320.00, 12, 'Повітряний фільтр двигуна', 'F026400071');

-- ========================================
-- 5. ТРАНСПОРТНІ ЗАСОБИ (замініть user_id на реальні)
-- ========================================
-- УВАГА: Замініть ці UUID на реальні ID користувачів з вашої БД!
INSERT INTO vehicles (id, user_id, vin, make, model, year, color, license_plate, mileage) VALUES
('vvvv1111-1111-1111-1111-111111111111', 'b07111e6-33bf-4da1-a66f-1a2fc0c3c922', 'WBAVA31070NL12345', 'BMW', 'X3', 2020, 'Чорний', 'AA1234BB', 45000),
('vvvv2222-2222-2222-2222-222222222222', 'f1c5fd82-e044-4cca-8bfe-ed15e8856f23', 'WVWZZZ1JZ3W123456', 'Volkswagen', 'Passat', 2019, 'Сірий', 'BB5678CC', 62000),
('vvvv3333-3333-3333-3333-333333333333', '5dd96427-f0e8-4c0e-bb49-3bf504889897', 'KMHJ281DPMU123456', 'Hyundai', 'Elantra', 2021, 'Білий', 'CC9012DD', 28000),
('vvvv4444-4444-4444-4444-444444444444', 'c66a6048-7573-4a01-b55c-7af0f2993f00', 'JF1SJ5LC5DG123456', 'Subaru', 'Forester', 2018, 'Синій', 'DD3456EE', 78000);

-- ========================================
-- 6. ЗАПИСИ НА ОБСЛУГОВУВАННЯ (замініть user_id на реальні)
-- ========================================
INSERT INTO appointments (id, user_id, vehicle_vin, service_type, scheduled_time, status, appointment_date) VALUES
('appt1111-1111-1111-1111-111111111111', 'b07111e6-33bf-4da1-a66f-1a2fc0c3c922', 'WBAVA31070NL12345', 'Заміна масла', '2024-01-15 10:00:00+02', 'completed', '2024-01-15'),
('appt2222-2222-2222-2222-222222222222', 'f1c5fd82-e044-4cca-8bfe-ed15e8856f23', 'WVWZZZ1JZ3W123456', 'Діагностика двигуна', '2024-01-20 14:30:00+02', 'completed', '2024-01-20'),
('appt3333-3333-3333-3333-333333333333', '5dd96427-f0e8-4c0e-bb49-3bf504889897', 'KMHJ281DPMU123456', 'Заміна гальмівних колодок', '2024-01-25 09:15:00+02', 'confirmed', '2024-01-25'),
('appt4444-4444-4444-4444-444444444444', 'c66a6048-7573-4a01-b55c-7af0f2993f00', 'JF1SJ5LC5DG123456', 'Розвал-схождення', '2024-01-30 16:00:00+02', 'pending', '2024-01-30');

-- ========================================
-- 7. ІСТОРІЯ ОБСЛУГОВУВАННЯ
-- ========================================
INSERT INTO service_history (id, vehicle_id, appointment_id, service_type, mileage, service_date, description, cost, mechanic_id) VALUES
('hist1111-1111-1111-1111-111111111111', 'vvvv1111-1111-1111-1111-111111111111', 'appt1111-1111-1111-1111-111111111111', 'Заміна масла', 45000, '2024-01-15 10:00:00+02', 'Проведена заміна моторного масла та масляного фільтра', 630.00, 'aaaa1111-1111-1111-1111-111111111111'),
('hist2222-2222-2222-2222-222222222222', 'vvvv2222-2222-2222-2222-222222222222', 'appt2222-2222-2222-2222-222222222222', 'Діагностика двигуна', 62000, '2024-01-20 14:30:00+02', 'Комп\'ютерна діагностика показала норму', 500.00, 'bbbb2222-2222-2222-2222-222222222222'),
('hist3333-3333-3333-3333-333333333333', 'vvvv3333-3333-3333-3333-333333333333', 'appt3333-3333-3333-3333-333333333333', 'Заміна гальмівних колодок', 28000, '2024-01-25 09:15:00+02', 'Замінені передні гальмівні колодки', 2050.00, 'cccc3333-3333-3333-3333-333333333333');

-- ========================================
-- 8. ЗАПИСИ ПРО ОБСЛУГОВУВАННЯ
-- ========================================
INSERT INTO service_records (id, vehicle_id, service_date, mileage, description, recommendations, next_service_date) VALUES
('rec1111-1111-1111-1111-111111111111', 'vvvv1111-1111-1111-1111-111111111111', '2024-01-15', 45000, 'ТО-2: Заміна масла, перевірка рівнів', 'Наступна заміна масла через 10000 км', '2024-07-15'),
('rec2222-2222-2222-2222-222222222222', 'vvvv2222-2222-2222-2222-222222222222', '2024-01-20', 62000, 'Діагностика двигуна - все в нормі', 'Рекомендується заміна повітряного фільтра', '2024-04-20'),
('rec3333-3333-3333-3333-333333333333', 'vvvv3333-3333-3333-3333-333333333333', '2024-01-25', 28000, 'Заміна гальмівних колодок', 'Перевірити гальмівні диски через 5000 км', '2024-06-25'),
('rec4444-4444-4444-4444-444444444444', 'vvvv4444-4444-4444-4444-444444444444', '2024-01-10', 78000, 'Планове ТО', 'Рекомендується заміна ременя ГРМ', '2024-07-10');

-- ========================================
-- 9. РЕМОНТНІ РОБОТИ
-- ========================================
INSERT INTO repair_works (id, service_history_id, name, description, labor_cost, duration) VALUES
('work1111-1111-1111-1111-111111111111', 'hist1111-1111-1111-1111-111111111111', 'Заміна масла', 'Злив старого масла, заміна фільтра, заливка нового масла', 200.00, 30),
('work2222-2222-2222-2222-222222222222', 'hist2222-2222-2222-2222-222222222222', 'Діагностика ЕБУ', 'Підключення до діагностичного обладнання', 500.00, 60),
('work3333-3333-3333-3333-333333333333', 'hist3333-3333-3333-3333-333333333333', 'Заміна колодок', 'Демонтаж коліс, заміна колодок, збірка', 400.00, 90);

-- ========================================
-- 10. ЗАПЧАСТИНИ ДЛЯ РЕМОНТУ
-- ========================================
INSERT INTO repair_parts (id, service_id, part_id, quantity) VALUES
('rp111111-1111-1111-1111-111111111111', 'rec1111-1111-1111-1111-111111111111', 1, 1),
('rp222222-2222-2222-2222-222222222222', 'rec1111-1111-1111-1111-111111111111', 2, 1),
('rp333333-3333-3333-3333-333333333333', 'rec3333-3333-3333-3333-333333333333', 3, 1),
('rp444444-4444-4444-4444-444444444444', 'rec2222-2222-2222-2222-222222222222', 4, 1);

-- ========================================
-- 11. ПОВІДОМЛЕННЯ (замініть user_id на реальні)
-- ========================================
INSERT INTO notifications (id, user_id, message, is_read, title, type, status, data) VALUES
('notif111-1111-1111-1111-111111111111', 'b07111e6-33bf-4da1-a66f-1a2fc0c3c922', 'Ваш запис на заміну масла підтверджено на 15.01.2024 о 10:00', true, 'Запис підтверджено', 'appointment_reminder', 'sent', '{"appointment_id": "appt1111-1111-1111-1111-111111111111"}'),
('notif222-2222-2222-2222-222222222222', 'f1c5fd82-e044-4cca-8bfe-ed15e8856f23', 'Діагностика вашого автомобіля завершена. Результати в особистому кабінеті', false, 'Діагностика завершена', 'maintenance_reminder', 'sent', '{"service_id": "hist2222-2222-2222-2222-222222222222"}'),
('notif333-3333-3333-3333-333333333333', '5dd96427-f0e8-4c0e-bb49-3bf504889897', 'Нагадування: через тиждень запланована заміна гальмівних колодок', false, 'Нагадування про запис', 'appointment_reminder', 'pending', '{"appointment_id": "appt3333-3333-3333-3333-333333333333"}'),
('notif444-4444-4444-4444-444444444444', 'c66a6048-7573-4a01-b55c-7af0f2993f00', 'Рекомендуємо провести заміну ременя ГРМ найближчим часом', false, 'Рекомендація по ТО', 'maintenance_reminder', 'pending', '{"recommendation": "timing_belt_replacement"}');

-- ========================================
-- 12. АКЦІЇ
-- ========================================
INSERT INTO promotions (id, title, description, discount_percent, start_date, end_date, is_active) VALUES
('promo111-1111-1111-1111-111111111111', 'Зимова знижка на ТО', 'Знижка 15% на всі види технічного обслуговування', 15, '2024-01-01 00:00:00+02', '2024-02-29 23:59:59+02', true),
('promo222-2222-2222-2222-222222222222', 'Акція на заміну масла', 'При заміні масла - діагностика безкоштовно', NULL, '2024-01-15 00:00:00+02', '2024-03-15 23:59:59+02', true),
('promo333-3333-3333-3333-333333333333', 'Весняна підготовка авто', 'Комплексна перевірка після зими зі знижкою 20%', 20, '2024-03-01 00:00:00+02', '2024-04-30 23:59:59+02', false);

-- ========================================
-- 13. ВІДГУКИ (замініть user_id на реальні)
-- ========================================
INSERT INTO reviews (id, service_history_id, user_id, rating, comment, is_public) VALUES
('rev11111-1111-1111-1111-111111111111', 'hist1111-1111-1111-1111-111111111111', 'b07111e6-33bf-4da1-a66f-1a2fc0c3c922', 5, 'Відмінний сервіс! Швидко та якісно замінили масло. Рекомендую!', true),
('rev22222-2222-2222-2222-222222222222', 'hist2222-2222-2222-2222-222222222222', 'f1c5fd82-e044-4cca-8bfe-ed15e8856f23', 4, 'Професійна діагностика, все пояснили детально. Ціна адекватна.', true),
('rev33333-3333-3333-3333-333333333333', 'hist3333-3333-3333-3333-333333333333', '5dd96427-f0e8-4c0e-bb49-3bf504889897', 5, 'Дуже задоволений роботою механіка. Гальма працюють ідеально!', true);

-- ========================================
-- 14. ПЛАТЕЖІ
-- ========================================
INSERT INTO payments (id, service_history_id, amount, payment_method, status, payment_date, notes) VALUES
('pay11111-1111-1111-1111-111111111111', 'hist1111-1111-1111-1111-111111111111', 630.00, 'card', 'completed', '2024-01-15 10:30:00+02', 'Оплата картою на місці'),
('pay22222-2222-2222-2222-222222222222', 'hist2222-2222-2222-2222-222222222222', 500.00, 'cash', 'completed', '2024-01-20 15:00:00+02', 'Готівкова оплата'),
('pay33333-3333-3333-3333-333333333333', 'hist3333-3333-3333-3333-333333333333', 2050.00, 'card', 'completed', '2024-01-25 10:00:00+02', 'Безконтактна оплата');

-- ========================================
-- 15. ЗАПИТИ НА ПРОБІГ (замініть user_id на реальні)
-- ========================================
INSERT INTO mileage_requests (id, vehicle_vin, user_id, current_mileage, status) VALUES
('mile1111-1111-1111-1111-111111111111', 'WBAVA31070NL12345', 'b07111e6-33bf-4da1-a66f-1a2fc0c3c922', 45500, 'approved'),
('mile2222-2222-2222-2222-222222222222', 'WVWZZZ1JZ3W123456', 'f1c5fd82-e044-4cca-8bfe-ed15e8856f23', 62300, 'pending'),
('mile3333-3333-3333-3333-333333333333', 'KMHJ281DPMU123456', '5dd96427-f0e8-4c0e-bb49-3bf504889897', 28200, 'approved');

-- ========================================
-- ІНСТРУКЦІЇ ДЛЯ ВИКОРИСТАННЯ
-- ========================================
/*
ПЕРЕД ВИКОНАННЯМ СКРИПТА:

1. Замініть всі 'b07111e6-33bf-4da1-a66f-1a2fc0c3c922', 'f1c5fd82-e044-4cca-8bfe-ed15e8856f23', '5dd96427-f0e8-4c0e-bb49-3bf504889897', 'c66a6048-7573-4a01-b55c-7af0f2993f00' на реальні UUID користувачів з вашої БД
   Для отримання реальних ID виконайте: SELECT id FROM users LIMIT 4;

2. Перевірте, чи існують користувачі в таблиці users

3. Виконайте скрипт частинами, щоб уникнути помилок зв'язків

ПОРЯДОК ВИКОНАННЯ:
1. Спочатку service_stations, mechanics, services, parts
2. Потім vehicles (після заміни USER_ID)
3. Далі appointments, service_history, service_records
4. Решта таблиць

Цей скрипт створить реалістичні тестові дані для перевірки функціональності додатку.
*/