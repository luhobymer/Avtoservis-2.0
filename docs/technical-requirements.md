# Технічне завдання на доопрацювання додатку Avtoservis

## 1. Загальні відомості

### 1.1. Призначення системи
Мобільний додаток для станції технічного обслуговування автомобілів, що забезпечує комунікацію між СТО та клієнтами, управління сервісними записами та ведення сервісної книги автомобіля.

### 1.2. Цільова аудиторія
- Клієнти СТО
- Адміністратори СТО
- Майстри СТО
- Незалежні майстри

## 2. Функціональні вимоги

### 2.1. Система автентифікації
- Інтеграція з Google Auth
- Реєстрація з трьома ролями (адмін СТО, майстер, клієнт)
- Розділення доступу до функціоналу за ролями
- Вибір типу майстра при реєстрації (працівник СТО/незалежний)

### 2.2. Адміністративна панель
- Управління користувачами (для адміна - всі користувачі, для майстра - тільки клієнти)
- Управління СТО (додавання/редагування)
- Налаштування послуг СТО
- Управління каталогом запчастин
- Управління марками та моделями авто
- Управління виробниками запчастин

### 2.3. Клієнтська частина
- Реєстрація на ремонт
- Перегляд статусу ремонту
- Сервісна книга автомобіля
- Внесення даних в сервісну книгу
- Чат з СТО/майстром
- Отримання сповіщень
- Відповідь на запити щодо пробігу

### 2.4. Система сповіщень
- Push-повідомлення
- Нагадування про планове ТО
- Щомісячні запити пробігу
- Сповіщення про статус ремонту

### 2.5. Інтеграції
- Telegram бот
- Viber бот

## 3. Технічні вимоги

### 3.1. Платформи
- Progressive Web App (PWA)
- Android (Google Play) з підтримкою камери
- iOS (App Store) з підтримкою камери
- Веб-браузер з підтримкою File API

### 3.2. Функціональні вимоги до роботи з фотографіями
- Завантаження фотографій запчастин з описом та характеристиками
- Розпізнавання тексту з фотографій техпаспорта (OCR)
- Автоматичне зменшення розміру фотографій для оптимізації
- Офлайн-доступ до раніше завантажених фотографій
- Групування фотографій за категоріями запчастин
- Можливість додавання декількох фотографій до одного товару
- Функція пошуку запчастин за фотографіями
- Автоматичне розпізнавання характеристик запчастин з фотографій (OCR)
- Автоматичне заповнення даних про запчастину на основі розпізнаного тексту
- Прив'язка запчастин до конкретних автомобілів
- Зберігання історії використання та цін запчастин
- Можливість ручного редагування розпізнаних даних
- Автоматичне визначення категорії запчастини на основі фото

### 3.1.1 Вимоги публікації
- URL Google Play: https://play.google.com/store/apps/details?id=com.avtoservis
- URL App Store: https://apps.apple.com/ua/app/avtoservis/id123456789
- SSL сертифікат для production має бути від довіреного центру сертифікації
- Обов'язкове налаштування автоматичного оновлення SSL (Let's Encrypt)
- Lighthouse аудит має показувати:
  - Мінімальний PWA score: 90+
  - Best Practices: 95+
  - Accessibility: 90+
  - SEO: 85+

### 3.2. Технологічний стек
- Frontend: 
  - Мобільна версія: React Native з Expo SDK 53 (тільки для мобільних платформ)
  - Веб-версія: React + Vite (розробляється окремо з папки Client)
  - **ВАЖЛИВО**: Проект повинен використовувати Expo SDK 53 для забезпечення сумісності з останніми версіями залежностей та інструментів розробки
- Backend: Express.js
- База даних: Supabase
- PWA: Service Workers + Push API (тільки для веб-версії)
- OCR: Tesseract.js для розпізнавання тексту (веб-версія), Expo Camera + ML Kit (мобільна версія)
- Обробка зображень: Sharp.js для оптимізації (веб-версія), Expo Image Manipulator (мобільна версія)

### 3.3. Локалізація
- Українська мова
- Російська мова
- Англійська мова
- Автоматичне визначення мови користувача

### 3.4. Безпека
- JWT автентифікація
- Шифрування даних
- Захист від SQL-ін'єкцій
- Захист від XSS-атак
- Двухфакторна аутентифікація по бажання,розміщена у профілі користувача
- Безпечне зберігання та передача фотографій
- Валідація типів та розмірів файлів
- Антивірусна перевірка завантажених файлів

### 3.5. Вимоги до тестових даних
- Мінімум 3 тестових користувачі з різними ролями (адмін, механік, клієнт)
- Мінімум 3 тестових автомобілі з різними марками та моделями
- Унікальні VIN-коди для кожного транспортного засобу
- Реалістичні дані про технічні характеристики
- Дати реєстрації у хронологічному порядку

### 3.6. Тестування
- Екстремальне тестування
- Тестування з автоматизацією
- Тестування з розгортанням

## 4. Вимоги до інтерфейсу

### 4.1. Загальні вимоги
- Mobile-first дизайн
- Адаптивний інтерфейс
- Material Design
- Підтримка темної теми
- Інтерфейс для завантаження та перегляду фотографій
- Попередній перегляд зображень перед завантаженням
- Можливість обрізки та базового редагування фото

### 4.2. Стартова сторінка
- Опис додатку
- Кнопки авторизації та реєстрації
- Форма зворотного зв'язку
- Контактна інформація

## 5. Етапи реалізації

### 5.1. Підготовчий етап
- [ ] Міграція бази даних на Supabase
- [ ] Налаштування CI/CD
- [ ] Оновлення залежностей

### 5.2. Основний етап
- [ ] Імплементація нової системи автентифікації
- [ ] Розробка адміністративної панелі
- [ ] Розробка клієнтської частини
- [ ] Інтеграція системи сповіщень
- [ ] Розробка модуля роботи з фотографіями запчастин
- [ ] Імплементація OCR для розпізнавання техпаспортів
- [ ] Розробка функціоналу додавання автомобілів через фото

### 5.3. Завершальний етап
- [ ] Розробка ботів для месенджерів
- [ ] Тестування
- [ ] Підготовка до публікації в магазинах додатків

## 6. Вимоги до надійності

### 6.1. Доступність
- Час безперервної роботи: 99.9%
- Максимальний час відновлення: 1 година

### 6.2. Продуктивність
- Час відгуку сервера: до 1 секунди
- Підтримка одночасної роботи до 1000 користувачів

### 6.3. Резервне копіювання
- Щоденне резервне копіювання даних
- Зберігання резервних копій протягом 30 днів

## 7. Документація проекту

### 7.1. Перелік документів проекту

#### Пріоритет 1 (Критичні - обов'язкові для перегляду при кожній задачі)
1. **RECOMMENDATIONS.md** - Основні рекомендації та принципи розробки
2. **technical-requirements.md** - Технічне завдання проекту
3. **DEBUGGING_PLAN.md** - План налагодження та історія виправлень

#### Пріоритет 2 (Важливі - перевіряти при архітектурних змінах)
4. **project-analysis.md** - Аналіз проекту та архітектури
5. **database_analysis.md** - Аналіз структури бази даних
6. **database-access.md** - Документація доступу до БД

#### Пріоритет 3 (Допоміжні - використовувати за потребою)
7. **README.md** - Загальна інформація про проект
8. **SETUP_INSTRUCTIONS.md** - Інструкції з налаштування
9. **ERRORBOUNDARY_TESTING.md** - Тестування обробки помилок
10. **instAPI.txt** - API інструкції

### 7.2. Правила використання документації

#### При початку роботи з новою задачею:
1. Обов'язково переглянути документи Пріоритету 1
2. Перевірити чи є зміни в документах з моменту останнього перегляду
3. При архітектурних змінах - переглянути документи Пріоритету 2
4. Оновлювати документацію після внесення змін

#### При виправленні помилок:
1. Записувати всі кроки в DEBUGGING_PLAN.md
2. Оновлювати RECOMMENDATIONS.md новими принципами
3. Фіксувати зміни в архітектурі в project-analysis.md

### 7.3. Вимоги до технічної документації
- API документація
- Інструкція з розгортання
- Опис архітектури системи

### 7.4. Вимоги до користувацької документації
- Інструкція користувача
- Інструкція адміністратора
- Відеоінструкції з базових операцій

## 8. Нотатки розробки

### 8.1. Відкладені завдання
- **Тестування майстра та відміна записів** - функціонал недороблений, тестування відкладено до завершення розробки основних функцій майстра
- Пріоритет зараз на клієнтській частині